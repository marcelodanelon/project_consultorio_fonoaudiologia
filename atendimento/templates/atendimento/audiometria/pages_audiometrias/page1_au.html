<div>
    <div class="row align-items-center">
        <div class="col">
            {{form.auAudio.label}}
            {{form.auAudio}}
        </div>
        <div class="col">
            {{form.auCalib.label}}
            {{form.auCalib}}
        </div>
        <div class="col">
            {{form.auMedSo.label}}
            {{form.auMedSo}}
        </div>
    </div>
    <br>
    <div class="row align-items-center" style="width: 48vw; overflow-x: auto; display: flex; flex-wrap: nowrap;">
        <div style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; white-space: nowrap;">
            <div id="plano_cartesiano_OE" class="planos_cartesianos">
                <b>Ouvido Esquerdo</b><br>
                <div class="cartesian-plane" id="cartesian-plane">
                <!-- Eixo X -->
                <div class="axis x-axis"></div>
        
                <!-- Eixo Y -->
                <div class="axis y-axis"></div>
        
                <!-- Ticks no eixo X -->
                <!-- Criei 10 ticks igualmente espaçados -->
                <div class="tick x-tick" style="left: 0%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;"></div>
                </div>
                <div class="tick x-tick" style="left: 10%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;">250</div>
                </div>
                <div class="tick x-tick" style="left: 20%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;">500</div>
                </div>
                <div class="tick x-tick" style="left: 30%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;">1K</div>
                </div>
                <div class="tick x-tick" style="left: 40%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;">2K</div>
                </div>
                <div class="tick x-tick" style="left: 50%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;">3K</div>
                </div>
                <div class="tick x-tick" style="left: 60%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;">4K</div>
                </div>
                <div class="tick x-tick" style="left: 70%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;">6K</div>
                </div>
                <div class="tick x-tick" style="left: 80%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;">8K</div>
                </div>
                <div class="tick x-tick" style="left: 100%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;">Hz</div>
                </div>
        
                <!-- Ticks no eixo Y -->
                <!-- Criei 10 ticks igualmente espaçados -->
                <div class="tick y-tick" style="top: 0%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">-10</div>
                </div>
                <div class="tick y-tick" style="top: 10%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">0</div>
                </div>
                <div class="tick y-tick" style="top: 20%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">10</div>
                </div>
                <div class="tick y-tick" style="top: 30%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">20</div>
                </div>
                <div class="tick y-tick" style="top: 40%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">30</div>
                </div>
                <div class="tick y-tick" style="top: 50%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">40</div>
                </div>
                <div class="tick y-tick" style="top: 60%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">50</div>
                </div>
                <div class="tick y-tick" style="top: 70%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">60</div>
                </div>
                <div class="tick y-tick" style="top: 80%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">70</div>
                </div>
                <div class="tick y-tick" style="top: 90%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">80</div>
                </div>
                <div class="tick y-tick" style="top: 100%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">90</div>
                </div>
                <div class="tick y-tick" style="top: 110%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">100</div>
                </div>
                <div class="tick y-tick" style="top: 120%;">
                    <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">110</div>
                </div>            
                </div>
            </div>
            <br><br><br>
            <input hidden name="auCoordenadas_planoI_Linha1" value="{{ form.auCoordenadas_planoI_Linha1.value }}" type="text" id="id_auCoordenadas_planoI_Linha1">
            <input hidden name="auCoordenadas_planoI_Linha2" value="{{ form.auCoordenadas_planoI_Linha2.value }}" type="text" id="id_auCoordenadas_planoI_Linha2">
            <button class="custom-button-base mb-1" style="width: 20vh;" type="button" onclick="selectLineType(1)">Linha 1</button>
            <button class="custom-button-base mb-1" style="width: 20vh;" type="button" onclick="selectLineType(2)">Linha 2</button>
            <button class="custom-button-base mb-1" style="width: 20vh;" type="button" onclick="clearAll()">Limpar Tudo</button>
        </div>
    
        <div style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; white-space: nowrap;">
            <div id="plano_cartesiano_OD" class="planos_cartesianos">   
                <b>Ouvido Direito</b><br>
                <div class="cartesian-plane" id="cartesian-plane2">
                    <!-- Eixo X -->
                    <div class="axis x-axis"></div>
            
                    <!-- Eixo Y -->
                    <div class="axis y-axis"></div>
            
                    <!-- Ticks no eixo X -->
                    <!-- Criei 10 ticks igualmente espaçados -->
                    <div class="tick x-tick" style="left: 0%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;"></div>
                    </div>
                    <div class="tick x-tick" style="left: 10%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;">250</div>
                    </div>
                    <div class="tick x-tick" style="left: 20%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;">500</div>
                    </div>
                    <div class="tick x-tick" style="left: 30%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;">1K</div>
                    </div>
                    <div class="tick x-tick" style="left: 40%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;">2K</div>
                    </div>
                    <div class="tick x-tick" style="left: 50%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;">3K</div>
                    </div>
                    <div class="tick x-tick" style="left: 60%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;">4K</div>
                    </div>
                    <div class="tick x-tick" style="left: 70%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;">6K</div>
                    </div>
                    <div class="tick x-tick" style="left: 80%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;">8K</div>
                    </div>
                    <div class="tick x-tick" style="left: 100%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateX(-50%); top: -20px;">Hz</div>
                    </div>
            
                    <!-- Ticks no eixo Y -->
                    <!-- Criei 10 ticks igualmente espaçados -->
                    <div class="tick y-tick" style="top: 0%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">-10</div>
                    </div>
                    <div class="tick y-tick" style="top: 10%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">0</div>
                    </div>
                    <div class="tick y-tick" style="top: 20%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">10</div>
                    </div>
                    <div class="tick y-tick" style="top: 30%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">20</div>
                    </div>
                    <div class="tick y-tick" style="top: 40%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">30</div>
                    </div>
                    <div class="tick y-tick" style="top: 50%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">40</div>
                    </div>
                    <div class="tick y-tick" style="top: 60%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">50</div>
                    </div>
                    <div class="tick y-tick" style="top: 70%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">60</div>
                    </div>
                    <div class="tick y-tick" style="top: 80%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">70</div>
                    </div>
                    <div class="tick y-tick" style="top: 90%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">80</div>
                    </div>
                    <div class="tick y-tick" style="top: 100%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">90</div>
                    </div>
                    <div class="tick y-tick" style="top: 110%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">100</div>
                    </div>
                    <div class="tick y-tick" style="top: 120%;">
                        <div class="x-label" style="position: absolute; font-size: 12px; transform: translateY(-50%); left: -23px;">110</div>
                    </div>            
                </div>
            </div>
            <br><br><br>
            <input hidden name="auCoordenadas_planoII_Linha1" value="{{ form.auCoordenadas_planoII_Linha1.value }}" type="text" id="id_auCoordenadas_planoII_Linha1">
            <input hidden name="auCoordenadas_planoII_Linha2" value="{{ form.auCoordenadas_planoII_Linha2.value }}" type="text" id="id_auCoordenadas_planoII_Linha2">
            <button class="custom-button-base mb-1" style="width: 20vh;" type="button" onclick="selectLineType2(3)">Linha 1</button>
            <button class="custom-button-base mb-1" style="width: 20vh;" type="button" onclick="selectLineType2(4)">Linha 2</button>
            <button class="custom-button-base mb-1" style="width: 20vh;" type="button" onclick="clearAll2()">Limpar Tudo</button>
        </div>    
    </div>
</div>
<script>
document.addEventListener("DOMContentLoaded", function () {
    // [plano cartesiano 1]
    const plane = document.getElementById("cartesian-plane");
    let greenPoints = [];
    let bluePoints = [];
    let greenPointsCoordinates = [];
    let bluePointsCoordinates = [];
    let selectedLineType = 1;

    // busca os pontos já preenchidos e inclusão na váriavel de Pontos Coordenadas
    var coordenadas = $('#id_auCoordenadas_planoI_Linha1').val();
    if(coordenadas!= 'None'){
        const coordenadasArray = coordenadas.slice(1, -1).split('),(');
        for (let i = 0; i < coordenadasArray.length; i++) {
            const coordenada = coordenadasArray[i];
            const [x, y] = coordenada.split(',').map(Number);
            const coordenadaFormatada = formatCoordinates(x, y);
            greenPointsCoordinates.push(coordenadaFormatada);
        }    
    }
    coordenadas = $('#id_auCoordenadas_planoI_Linha2').val();
    if(coordenadas!= 'None'){
        const coordenadasArray = coordenadas.slice(1, -1).split('),(');
        for (let i = 0; i < coordenadasArray.length; i++) {
            const coordenada = coordenadasArray[i];
            const [x, y] = coordenada.split(',').map(Number);
            const coordenadaFormatada = formatCoordinates(x, y);
            bluePointsCoordinates.push(coordenadaFormatada);
        }    
    }

    // incluindo os pontos permitidos para clique
    for (let i = 0; i <= 100; i += 10) {
        for (let j = 0; j <= 120; j += 10) {
            if (i != 90){
                const point = document.createElement("div");
                point.className = "intersection-point";
                point.style.left = i + "%";
                point.style.top = j + "%";
                plane.appendChild(point);
            }
        }
    }

    plane.addEventListener("click", function (event) {
        console.log("Evento de clique recebido:", event);
        const clickedPoint = document.elementFromPoint(event.clientX, event.clientY);

        if (clickedPoint && (clickedPoint.classList.contains("intersection-point") || clickedPoint.classList.contains("blue-point") || clickedPoint.classList.contains("green-point"))) {
            // Adiciona um ponto verde ou azul, dependendo do botão selecionado
            const point = document.createElement("div");
            point.className = selectedLineType === 1 ? "green-point" : "blue-point";
            point.style.left = clickedPoint.style.left;
            point.style.top = clickedPoint.style.top;
            plane.appendChild(point);

            // Adiciona o ponto à lista correspondente
            if (selectedLineType === 1) {
                greenPoints.push(point);
                greenPointsCoordinates.push(formatCoordinates(parseFloat(point.style.left), parseFloat(point.style.top)));
            } else if (selectedLineType === 2) {
                bluePoints.push(point);
                bluePointsCoordinates.push(formatCoordinates(parseFloat(point.style.left), parseFloat(point.style.top)));
            }
            // Conecta pontos com uma linha
            if (greenPoints.length > 1 && selectedLineType === 1) {
                const line = createLineElement("line-green");
                connectPointsWithLine(greenPoints[greenPoints.length - 2], point, line, plane);
            }
            if (bluePoints.length > 1 && selectedLineType === 2) {
                const line = createLineElement("line-blue");
                connectPointsWithLine(bluePoints[bluePoints.length - 2], point, line, plane);
            }
            $('#id_auCoordenadas_planoI_Linha1').val(greenPointsCoordinates)
            $('#id_auCoordenadas_planoI_Linha2').val(bluePointsCoordinates)
        }
        console.log(greenPointsCoordinates)
    });

    window.selectLineType = function(type) {
        // Atualiza o tipo de linha selecionado
        selectedLineType = type;
    }

    window.clearAll = function() {
        // Limpa todos os pontos e linhas
        greenPoints.forEach(point => plane.removeChild(point));
        bluePoints.forEach(point => plane.removeChild(point));
        greenPoints = [];
        bluePoints = [];
        greenPointsCoordinates = [];
        bluePointsCoordinates = [];
        $('#id_auCoordenadas_planoI_Linha1').val('')
        $('#id_auCoordenadas_planoI_Linha2').val('')
    
        // Remove as linhas
        const lines = Array.from(plane.childNodes);
        lines.forEach(node => {
            if (node.classList && node.classList.contains('line')) {
                plane.removeChild(node);
            }
        });
    }

    // [plano cartesiano 2]
    const plane2 = document.getElementById("cartesian-plane2");
    let greenPoints2 = [];
    let bluePoints2 = [];
    let greenPointsCoordinates2 = [];
    let bluePointsCoordinates2 = [];
    let selectedLineType2 = 3;

    // busca os pontos já preenchidos e inclusão na váriavel de Pontos Coordenadas
    var coordenadas = $('#id_auCoordenadas_planoII_Linha1').val();
    if(coordenadas!= 'None'){
        const coordenadasArray = coordenadas.slice(1, -1).split('),(');
        for (let i = 0; i < coordenadasArray.length; i++) {
            const coordenada = coordenadasArray[i];
            const [x, y] = coordenada.split(',').map(Number);
            const coordenadaFormatada = formatCoordinates(x, y);
            greenPointsCoordinates2.push(coordenadaFormatada);
        }    
    }
    coordenadas = $('#id_auCoordenadas_planoII_Linha2').val();
    if(coordenadas!= 'None'){
        const coordenadasArray = coordenadas.slice(1, -1).split('),(');
        for (let i = 0; i < coordenadasArray.length; i++) {
            const coordenada = coordenadasArray[i];
            const [x, y] = coordenada.split(',').map(Number);
            const coordenadaFormatada = formatCoordinates(x, y);
            bluePointsCoordinates2.push(coordenadaFormatada);
        }    
    }

    for (let i = 0; i <= 100; i += 10) {
        for (let j = 0; j <= 120; j += 10) {
            if (i != 90){
                const point = document.createElement("div");
                point.className = "intersection-point";
                point.style.left = i + "%";
                point.style.top = j + "%";
                plane2.appendChild(point);
            }
        }
    }

    plane2.addEventListener("click", function (event) {
        const clickedPoint = document.elementFromPoint(event.clientX, event.clientY);
    
        if (clickedPoint && (clickedPoint.classList.contains("intersection-point") || clickedPoint.classList.contains("blue-point") || clickedPoint.classList.contains("green-point"))) {
            // Adiciona um ponto verde ou azul, dependendo do botão selecionado
            const point = document.createElement("div");
            point.className = selectedLineType2 === 3 ? "green-point" : "blue-point";
            point.style.left = clickedPoint.style.left;
            point.style.top = clickedPoint.style.top;
            plane2.appendChild(point);
    
            // Adiciona o ponto à lista correspondente
            if (selectedLineType2 === 3) {
                greenPoints2.push(point);
                greenPointsCoordinates2.push(formatCoordinates(parseFloat(point.style.left), parseFloat(point.style.top)));
            } else if (selectedLineType2 === 4) {
                bluePoints2.push(point);
                bluePointsCoordinates2.push(formatCoordinates(parseFloat(point.style.left), parseFloat(point.style.top)));
            }
    
            // Conecta pontos com uma linha
            if (greenPoints2.length > 1 && selectedLineType2 === 3) {
                const line = createLineElement2("line-green");
                connectPointsWithLine(greenPoints2[greenPoints2.length - 2], point, line, plane2);
            }
            if (bluePoints2.length > 1 && selectedLineType2 === 4) {
                const line = createLineElement2("line-blue");
                connectPointsWithLine(bluePoints2[bluePoints2.length - 2], point, line, plane2);
            }
            $('#id_auCoordenadas_planoII_Linha1').val(greenPointsCoordinates2)
            $('#id_auCoordenadas_planoII_Linha2').val(bluePointsCoordinates2)
        }
    });

    window.selectLineType2 = function(type) {
        // Atualiza o tipo de linha selecionado
        selectedLineType2 = type;
    }

    window.clearAll2 = function() {
        // Limpa todos os pontos e linhas
        greenPoints2.forEach(point => plane2.removeChild(point));
        bluePoints2.forEach(point => plane2.removeChild(point));
        greenPoints2 = [];
        bluePoints2 = [];
        greenPointsCoordinates2 = [];
        bluePointsCoordinates2 = [];
        $('#id_auCoordenadas_planoII_Linha1').val('')
        $('#id_auCoordenadas_planoII_Linha2').val('')
    
        // Remove as linhas
        const lines = Array.from(plane2.childNodes);
        lines.forEach(node => {
            if (node.classList && node.classList.contains('line')) {
                plane2.removeChild(node);
            }
        });
    }
    
    incluirPontosIniciais();
    
    function incluirPontosIniciais() {
        // Obtenha os valores atuais dos campos de entrada ocultos
        const coordenadasLinha1 = $('#id_auCoordenadas_planoI_Linha1').val();
        const coordenadasLinha2 = $('#id_auCoordenadas_planoI_Linha2').val();
        const coordenadasLinha3 = $('#id_auCoordenadas_planoII_Linha1').val();
        const coordenadasLinha4 = $('#id_auCoordenadas_planoII_Linha2').val();

        // Exemplo de pontos iniciais (você pode ajustar conforme necessário)
        const pontosIniciaisLinha1 = converterStringParaPontos(coordenadasLinha1);
        const pontosIniciaisLinha2 = converterStringParaPontos(coordenadasLinha2);
        const pontosIniciaisLinha3 = converterStringParaPontos(coordenadasLinha3);
        const pontosIniciaisLinha4 = converterStringParaPontos(coordenadasLinha4);

        if (
            Array.isArray(pontosIniciaisLinha1) &&
            pontosIniciaisLinha1.length > 0 &&
            pontosIniciaisLinha1.every(ponto => typeof ponto.x === 'number' && typeof ponto.y === 'number' && !isNaN(ponto.x) && !isNaN(ponto.y))
        ) {
            adicionarPontosAoPlano(pontosIniciaisLinha1, "green-point", greenPoints, greenPointsCoordinates, "line-green", plane);
        }

        if (
            Array.isArray(pontosIniciaisLinha2) &&
            pontosIniciaisLinha2.length > 0 &&
            pontosIniciaisLinha2.every(ponto => typeof ponto.x === 'number' && typeof ponto.y === 'number' && !isNaN(ponto.x) && !isNaN(ponto.y))
        ) {
            adicionarPontosAoPlano(pontosIniciaisLinha2, "blue-point", bluePoints, bluePointsCoordinates, "line-blue", plane);
        }

        if (
            Array.isArray(pontosIniciaisLinha3) &&
            pontosIniciaisLinha3.length > 0 &&
            pontosIniciaisLinha3.every(ponto => typeof ponto.x === 'number' && typeof ponto.y === 'number' && !isNaN(ponto.x) && !isNaN(ponto.y))
        ) {
            adicionarPontosAoPlano(pontosIniciaisLinha3, "green-point", greenPoints2, greenPointsCoordinates2, "line-green", plane2);
        }

        if (
            Array.isArray(pontosIniciaisLinha4) &&
            pontosIniciaisLinha4.length > 0 &&
            pontosIniciaisLinha4.every(ponto => typeof ponto.x === 'number' && typeof ponto.y === 'number' && !isNaN(ponto.x) && !isNaN(ponto.y))
        ) {
            adicionarPontosAoPlano(pontosIniciaisLinha4, "blue-point", bluePoints2, bluePointsCoordinates2, "line-blue", plane2);
        }
        $('#id_auCoordenadas_planoI_Linha1').val(greenPointsCoordinates);
        $('#id_auCoordenadas_planoI_Linha2').val(bluePointsCoordinates);
        $('#id_auCoordenadas_planoII_Linha1').val(greenPointsCoordinates2);
        $('#id_auCoordenadas_planoII_Linha2').val(bluePointsCoordinates2);
    }

    // Função para adicionar pontos ao plano
    function adicionarPontosAoPlano(pontos, pontoClassName, listaPontos, listaCoordenadas, linhaClassName, plano) {
        pontos.forEach((ponto) => {
            const point = document.createElement("div");
            point.className = pontoClassName;
            point.style.left = ponto.x + "%";
            point.style.top = ponto.y + "%";
            plano.appendChild(point);
            
            // Adiciona o ponto à lista correspondente
            listaPontos.push(point);

            // Conecta pontos com uma linha
            if (listaPontos.length > 1) {
                const line = createLineElement(linhaClassName);
                connectPointsWithLine(listaPontos[listaPontos.length - 2], point, line, plano);
            }
        });
    }
});

function converterStringParaPontos(coordenadasString) {
    // Remove os parênteses externos e divide a string em pares de coordenadas
    const coordenadasArray = coordenadasString.slice(1, -1).split("),(");

    // Converte cada par de coordenadas em um objeto { x, y }
    const pontos = coordenadasArray.map(coordenada => {
        const [x, y] = coordenada.split(",").map(Number);
        return { x, y };
    });

    return pontos;
}

function formatCoordinates(x, y) {
    //console.log("Valores recebidos: x:" + x + ' y:' + y);  
    if (typeof x !== 'number' || typeof y !== 'number' || isNaN(x) || isNaN(y)) {
        throw new Error('As coordenadas devem ser números válidos.');
    }
    return `(${x.toFixed(2)}, ${y.toFixed(2)})`;
}

function connectPointsWithLine(point1, point2, line, plane) {
    const startX = parseFloat(point1.style.left);
    const startY = parseFloat(point1.style.top);
    const endX = parseFloat(point2.style.left);
    const endY = parseFloat(point2.style.top);

    // Calcula o comprimento e ângulo em porcentagens
    const length = Math.sqrt(Math.pow(endX - startX, 2) + Math.pow(endY - startY, 2));
    const angle = Math.atan2(endY - startY, endX - startX);
    
    // Define as coordenadas do ponto inicial e o comprimento da linha
    line.style.left = startX + "%";
    line.style.top = startY + "%";
    line.style.width = length + "%";

    // Define a transformação para a rotação da linha
    line.style.transform = `rotate(${angle}rad)`;

    // Adiciona a linha à tela
    plane.appendChild(line);
}

function createLineElement(className) {
    const line = document.createElement("div");
    line.className = "line " + className;
    return line;
}

function createLineElement2(className) {
    const line = document.createElement("div");
    line.className = "line " + className;
    return line;
}
</script>
    